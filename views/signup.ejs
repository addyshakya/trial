<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  </head>
  <body>
<div id="main">
  <div class="container" style="width: 25vw; top: 45%; left: 50%; position: absolute; transform: translate(-50%,-50%); 
  border: 1px solid #686868; padding: 40px;">
      <a href="/login/federated/google"><button style="width: 260px; top: 23%; z-index: 99; position: absolute; margin-bottom: 5px;" class="btn btn-primary">Log in with Google</button></a>
    <form action="/register" method="post">
      <div style=" width: 23.5vw; height: 20vh; position: relative; margin-top: -5vh; margin-left: -30px;" id="instalogo">
        <img style="width: 130%; height: 130%; object-fit: cover; left: 50%; top: 50%; position: absolute;
        transform: translate(-50%,-50%);" src="/images/uploads/Instagram-Logo-800x450-removebg.png" alt="">
      </div>
      <br>
      <br>
      <h5 class="mb-3" style="text-align: center; color: #686868;">Sign up to see photos and videos from your friends.</h5>
      <div class="mb-1">
        <label for="exampleInputEmail1" class="form-label" ></label>
        <input type="text" name="username" style="background-color: rgb(238, 237, 237); border: none;" class="form-control" placeholder="Username" id="inputfield" aria-describedby="emailHelp">
        <div id="emailHelp"</div>
      </div>
      <div style="margin-top: -20px;">
        <label for="exampleInputEmail1" class="form-label"></label>
        <input type="email" name="email" style="background-color: rgb(238, 237, 237);" class="form-control" placeholder="Email address" id="exampleInputEmail1" aria-describedby="emailHelp">
        <div id="emailHelp"</div>
      </div>
      <div class="mb-3" style="margin-top: -20px;" >
        <label for="exampleInputPassword1" class="form-label"></label>
        <input type="password" name="password" style="background-color: rgb(238, 237, 237);" placeholder="Password" class="form-control" id="exampleInputPassword1">
      </div>
      <h5 class="mb-3" style="text-align:center; font-size: .8vw; color: #686868;">By signing up, you agree to our Terms , Privacy Policy and Cookies Policy .</h5>
      <button type="submit" id="submit" style="margin-top: 30px; width: 260px;" class="btn btn-primary">Submit</button>
    </form>
    
    <div id="login" style="width: 25vw; height: 10vh; border: 1px solid #686868 ; margin-top: 55px; margin-left: -41px; position: absolute;">
      <h5 style="font-size: 1.2vw; display: flex; align-items: center; justify-content: center;margin-top: 20px;">Have an account? <a href="/">Log in</a></h5>
    </div>
    
  </div>

</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>

      var inp = document.querySelector("#inputfield");
      var submitButton = document.querySelector("#submit");

      
      inp.addEventListener('input',function(event){
        if(inp.value.trim().length >0){
          axios.get(`/username/${inp.value}`).then((res)=>{
            if(res.data.found){
              inp.style.border = "2px solid red"
              submitButton.setAttribute('disabled',"true");
            }else{
              inp.style.border = "2px solid black"
            submitButton.removeAttribute('disabled');
            }
          })
        }else{
          inp.style.border= '2px solid black'
          submitButton.removeAttribute('disabled');
        }
      })
      
    </script>
  </body>
</html>